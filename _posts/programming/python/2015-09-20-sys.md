---
layout: article
title: "04 - Manipulating the File Tree"
modified:
categories: programming
subcategories: python
excerpt:
tags: [Python]
image:
  feature:
  teaser:
  thumb:
date: 2015-09-20T14:09:19+02:00
---

{% include toc.html %}

I've recently been working on building a dataset from the Consumer Expenditure Survey and was so frustrated by the number of files to download that I decided to automate the process.  In doing so, I had to use several packages to identify files, create directories, and remove unnecessary junk.

Introduction
---------------
The `shutil` module, standing for 'shell utility', is part of the standard library.  It is a module containing many of the high level file operations that you would use from the standard Unix or Linux command line.  In particular, `shutil` is useful for generating directories, copying and moving files, and changing file names.  If you are hoping to automate any data gathering work, this will be super useful.

Along with `shutil`, you will probably also want the `os` module, which will allow you to dynamically define the file path seperator so your program works on any operating system, to create directories, and to rename files.  `os` allows you to interact directly with the operating system, so if you want to write truly modular code that deals with the file tree, you will need ot use it.

Finally, I used `glob` to parse file names and identify the ones I wanted to keep and the ones I wanted to replace.

Shutil Functions
---------

* **`shutil.copy(src, dst)`** - Copy the contents of file `src` to a new file at `dst`.

* **`shutil.copytree(src, dst)`** - Copy an entire directory tree "rooted" at source.  So this copies all the files and folders in `src` to a new folder at `dst`.

* **`shutil.rmtree(path)`** - Remove an entire directory rooted at `path`.  This is nice if you would like to combine files and clean up after yourself.  For instance, if you download 100 zip files in different folders and need one file from within them, you can gather, copy or move it, and delete the zip.

* **`shutil.move(src, dst)`** - Move a folder from `src` to `dist`.

OS Functions
------------
This package is massive, so I'm not even going to try to list the functions it has.  However, you will probably use the seperator function:

* **`os.sep`** - Returns the file path seperator for the current operating system.

Glob Functions
---------------
Glob returns all of the path names that match some specified pattern.  The functions use the glob rules defined by the Unix shell.  If you don't know these rules, [check them out on wikipedia](https://en.wikipedia.org/wiki/Glob_(programming)#Syntax){:target="_blank"}.

* **`glob.glob(pathname)`** - Returns a list of all pathnames in the pwd that match the glob rules given in `pathname`.  For instance, "jo*" is a right wildcard and matches anything that starts with "jo", eg "joe", "joseph", etc., but not "dojo".

* **`glob.iglob(pathname)`** - Returns the same thing, but as an iterator.  This is great, as it doesn't store all of the file names, but you can recover them easily.

Conclusion
------------
Yes, this is a ridiculously short and unsatisfactory blog post.  You'll understand why as you start working with these packages.  They are massive (except glob) and very powerful.  It turns out I bit off more than I could chew by deciding to write this post, but hey, maybe someone will use these functions and benefit from having them all in one place!
